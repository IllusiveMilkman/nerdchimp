<div class="container">
  <div class="text-center">
    <h2 >Add a new course to your library</h2>
  </div>
  <div id="hide">
  <span id="warning-message"></span>
  <form action="">
    <div class="form-group">
      <input class="form-control mb-1"type="text" value="" style="" id="user-url" placeholder="Please enter the url of your course page.">
      <input type="submit" class="btn btn-primary align-item-left" id="scraper-btn">
      <span id="loading" class="">

      </span>
    </div>
  </form>
  </div>

  <div id="course-found" class="d-none">
    Course was added to your library
  </div>

  <div id="manual-input" style='display: none;'>
    <%= simple_form_for [current_user, @usercourse] do |f| %>
    <%= f.error_notification %>
    <%= f.input :url, required: true %>
    <%= f.input :title, required: true%>
    <%= f.input :description, required: true, class: ' w-70' %>
    <%= f.input :provider, required: true %>
    <%= f.input :duration, required: true, input_html: { type: 'number' }, label: 'Description in hours' %>
    <%= f.input :category, required: true %>
    <script>
      const form = document.querySelectorAll("#manual-input input")
      form.forEach((input)=> { input.addEventListener('keyup',(event)=> {

        var completed = true
      var submit = document.querySelector('#course-form-btn')
        form.forEach((input)=> {
          console.log(input.value)
          if (!input.value ){
            completed = false
          }
        })
        if (completed) {

          submit.removeAttribute('disabled')
      } else{
        console.log(submit)
        submit.setAttribute('disabled', 'disabled');
      }
      })
      })


    </script>
    <div class="d-flex align-items-center mb-4">

      <%= f.submit "Submit", disabled: true , class: 'btn btn-primary ', id: 'course-form-btn' %>
      <p class="mb-0 ml-2">to add this course to your library</p>
    </div>
    <% end %>
  </div>
</div>
